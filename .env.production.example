# Production Environment Variables
# Copy to .env.production on VPS and fill in all values

# =============================================================================
# DATABASE
# =============================================================================
# Generate with: openssl rand -hex 24
POSTGRES_PASSWORD=

# Connection URL for API/worker containers (uses Docker service hostname)
# Replace <POSTGRES_PASSWORD> with the value above
DATABASE_URL=postgresql+asyncpg://postgres:<POSTGRES_PASSWORD>@postgres:5432/reva

# Auth database connection URL for Better Auth (Next.js web app)
# Uses standard psycopg driver (not asyncpg) — note the different driver prefix
# Replace <POSTGRES_PASSWORD> with the value above
AUTH_DATABASE_URL=postgresql://postgres:<POSTGRES_PASSWORD>@postgres:5432/reva_auth


# =============================================================================
# REDIS
# =============================================================================
# Generate with: openssl rand -hex 24
REDIS_PASSWORD=

# Connection URL for API/worker containers (uses Docker service hostname)
# Replace <REDIS_PASSWORD> with the value above
REDIS_URL=redis://:<REDIS_PASSWORD>@redis:6379/0


# =============================================================================
# SECURITY & SECRETS
# =============================================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=

# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=

# Generate with: openssl rand -hex 32
BETTER_AUTH_SECRET=


# =============================================================================
# API CONFIGURATION
# =============================================================================
# Options: production, staging, development
ENVIRONMENT=production

# Allowed CORS origins for the API — JSON array format required
# Must include the dashboard URL
ALLOWED_ORIGINS=["https://get-reva.ibtisam.dev"]

# Auth URL must match the iss/aud claims in JWT tokens issued by Better Auth.
# For Docker: use the URL Better Auth sees itself as (check BETTER_AUTH_URL or HOSTNAME).
# For production: use your public app URL (e.g., https://get-reva.ibtisam.dev)
AUTH_URL=

# Internal JWKS endpoint URL (API container must reach this over Docker network).
# In Docker: http://web:3000/api/auth/jwks | Leave empty for local dev (derives from AUTH_URL)
AUTH_JWKS_URL=http://web:3000/api/auth/jwks


# =============================================================================
# PUBLIC URLS
# =============================================================================
# These are used at build-time AND runtime for the web app
# Example: https://get-reva-api.ibtisam.dev
NEXT_PUBLIC_API_URL=

# Example: https://get-reva.ibtisam.dev
NEXT_PUBLIC_APP_URL=


# =============================================================================
# AI SERVICES
# =============================================================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=


# =============================================================================
# EMAIL SERVICE
# =============================================================================
# Get from: https://resend.com/api-keys
RESEND_API_KEY=


# =============================================================================
# SHOPIFY INTEGRATION
# =============================================================================
# Get from Shopify Partner Dashboard
SHOPIFY_CLIENT_ID=
SHOPIFY_CLIENT_SECRET=


# =============================================================================
# GOOGLE OAUTH (OPTIONAL)
# =============================================================================
# Get from: https://console.cloud.google.com/apis/credentials
# Leave blank to disable Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=


# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
# 1. Generate all secrets using the openssl commands above
# 2. Place this file at /opt/reva/.env.production on the VPS
# 3. Obtain API keys from the respective service dashboards
# 4. Set NEXT_PUBLIC_* URLs to match your domain configuration
# 5. Configure ALLOWED_ORIGINS to include your app domain
# 6. Deploy: docker compose -f docker-compose.prod.yml --env-file .env.production up -d
